fragment ProjectDetail on Project {
  id
  projectId
  name
  invocations
  maxInvocations
  active
  paused
  complete
  artistName
  contract {
    id
  }
}

query getAllProjects($first: Int!, $skip: Int) {
  projects(first: $first, skip: $skip, orderBy: projectId) {
    ...ProjectDetail
  }
}

query getWalletTokens(
  $wallet: String!
  $contracts: [String!]!
  $first: Int!
  $skip: Int
) {
  tokens(
    first: $first
    skip: $skip
    where: { owner: $wallet, contract_in: $contracts }
  ) {
    invocation
    project {
      name
    }
  }
}

query getContractProjects($contract: ID!, $first: Int!, $skip: Int) {
  contract(id: $contract) {
    projects(first: $first, skip: $skip, orderBy: projectId) {
      ...ProjectDetail
    }
  }
}

query getOpenProjects($contracts: [String!], $first: Int!, $skip: Int) {
  projects(
    first: $first
    skip: $skip
    orderBy: projectId
    where: {
      paused: false
      active: true
      complete: false
      contract_in: $contracts
    }
  ) {
    ...ProjectDetail
  }
}

query getProject($id: ID!) {
  projects(where: { id: $id }) {
    ...ProjectDetail
  }
}

query getEngineContracts($ids: [ID!]) {
  contracts(where: { id_not_in: $ids }) {
    id
  }
}

query getProjectInContracts($contracts: [String!], $projectId: BigInt!) {
  projects(
    where: { projectId: $projectId, contract_in: $contracts }
    first: 1
  ) {
    ...ProjectDetail
  }
}

query getProjectInvocations($id: ID!) {
  projects(where: { id: $id }) {
    invocations
  }
}

query getTokenOwner($id: ID!) {
  tokens(where: { id: $id }) {
    owner {
      id
    }
  }
}
