fragment ProjectDetail on Project {
  id
  projectId
  name
  invocations
  maxInvocations
  active
  paused
  complete
  artistName
  contract {
    id
  }
}

query getAllProjects($first: Int!, $skip: Int) {
  projects(first: $first, skip: $skip, orderBy: projectId) {
    ...ProjectDetail
  }
}

query getWalletTokens(
  $wallet: String!
  $contracts: [String!]!
  $first: Int!
  $skip: Int
) {
  tokens(
    first: $first
    skip: $skip
    where: { owner: $wallet, contract_in: $contracts }
  ) {
    invocation
    project {
      name
    }
  }
}

query getContractOpenProjects($contract: ID!, $first: Int!, $skip: Int) {
  contract(id: $contract) {
    projects(
      first: $first
      skip: $skip
      orderBy: projectId
      where: { paused: false, active: true, complete: false }
    ) {
      ...ProjectDetail
    }
  }
}

query getContractProject($contract: ID!, $projectId: BigInt!) {
  contract(id: $contract) {
    projects(where: { projectId: $projectId }) {
      ...ProjectDetail
    }
  }
}

query getContractProjectsWithCurationStatus(
  $id: ID!
  $first: Int!
  $skip: Int
  $curationStatus: String
) {
  contract(id: $id) {
    projects(
      where: { curationStatus: $curationStatus, active: true }
      first: $first
      skip: $skip
      orderBy: projectId
    ) {
      id
      projectId
      name
      invocations
      maxInvocations
      active
      curationStatus
      contract {
        id
      }
    }
  }
}

query getEngineContracts($ids: [ID!]) {
  contracts(where: { id_not_in: $ids }) {
    id
  }
}

query getProjectInvocations($id: ID!) {
  projects(where: { id: $id }) {
    invocations
  }
}

query getTokenOwner($id: ID!) {
  tokens(where: { id: $id }) {
    owner {
      id
    }
  }
}
